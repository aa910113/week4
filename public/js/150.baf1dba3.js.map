{"version":3,"file":"js/150.baf1dba3.js","mappings":"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","sources":["webpack://client/./src/views/CreateArticle.vue","webpack://client/./src/views/CreateArticle.vue?830a"],"sourcesContent":["<template>\n  <div class=\"relative\">\n    <div class=\"mb-4 bg-white border-2 border-neutral-900 absolute w-full top-1 right-1\">\n      <div class=\"flex justify-center items-center h-20\">\n      </div>\n    </div>\n  </div>\n  <ul class=\"relative\">\n    <li class=\"mb-4 bg-white border-2 border-neutral-900\">\n      <div class=\"flex justify-center items-center h-20\">\n        <p class=\"text-xl font-extrabold\">張貼動態</p>\n      </div>\n    </li>\n    <li class=\"add-article\">\n      <label for=\"articleContent\">\n        <p>文章內容</p>\n        <textarea\n          id=\"articleContent\"\n          class=\"border-2 border-neutral-900 w-full p-3\"\n          placeholder=\"輸入您的貼文內容\"\n          cols=\"30\"\n          rows=\"10\"\n          v-model=\"article.message\"\n        ></textarea>\n      </label>\n      <label for=\"uploadFile\">\n        <span class=\"my-4 rounded bg-black text-white py-1 px-8\">上傳照片</span>\n        <input\n          id=\"uploadFile\"\n          type=\"file\"\n          @change=\"handleFileUpload\"\n          style=\"display: none;\"\n        >\n      </label>\n      <img\n        class=\"mt-3\"\n        v-if=\"image\"\n        :src=\"image\"\n        alt=\"文章圖片\"\n      >\n      <div class=\"text-center\">\n        <button\n          class=\"\n          flex\n          mt-8\n          font-semibold\n          rounded\n          border-2\n          border-black\n          bg-gray-400\n          py-4\n          px-32\"\n          @click=\"createArticle\"\n        >\n          <svg\n            class=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\"\n            xmlns=\"http://www.w3.org/2000/svg\"\n            fill=\"none\"\n            viewBox=\"0 0 24 24\"\n            v-show=\"loading\"\n          >\n            <circle\n              class=\"opacity-25\"\n              cx=\"12\"\n              cy=\"12\"\n              r=\"10\"\n              stroke=\"currentColor\"\n              stroke-width=\"4\"\n            ></circle>\n            <path\n              class=\"opacity-75\"\n              fill=\"currentColor\"\n              d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042\n              1.135 5.824 3 7.938l3-2.647z\"\n            ></path>\n          </svg>\n          送出貼文\n        </button>\n      </div>\n    </li>\n  </ul>\n</template>\n\n<script>\nimport { ref, reactive } from 'vue';\nimport { useRouter } from 'vue-router';\nimport axios from 'axios';\n\nexport default {\n  setup() {\n    const router = useRouter();\n    const article = reactive({\n      userId: '628d0b89c32e7b686cb9b1f3',\n      message: '',\n      photo: '',\n    });\n    let file = {};\n    const image = ref('');\n    const handleFileUpload = (event) => {\n      try {\n        [file] = event.target.files;\n        const reader = new FileReader();\n        reader.addEventListener('load', (e) => {\n          image.value = e.target.result;\n        });\n        reader.readAsDataURL(file);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    const createArtucle = async () => {\n      try {\n        const formData = new FormData();\n        formData.append('image', file);\n        formData.append('type', 'file');\n        const { data } = await axios.post(\n          'https://api.imgur.com/3/image',\n          formData,\n          {\n            headers: {\n              Authorization: 'Bearer 78a149bc21f3e2977b838f68c293d82cfb9a5985',\n            },\n          },\n        );\n        console.log(data);\n      } catch (error) {\n        console.log(error);\n      }\n    };\n    const loading = ref(false);\n    const createArticle = async () => {\n      try {\n        loading.value = true;\n        const formData = new FormData();\n        formData.append('userId', article.userId);\n        formData.append('message', article.message);\n        formData.append('image', file);\n        const { data } = await axios.post(\n          `${process.env.VUE_APP_APIPATH}/article`,\n          formData,\n        );\n        if (data.status === 'success') {\n          router.push({\n            path: '/',\n          });\n        }\n      } catch (error) {\n        console.log(error);\n      } finally {\n        loading.value = false;\n      }\n    };\n    return {\n      article,\n      handleFileUpload,\n      file,\n      image,\n      createArtucle,\n      createArticle,\n      loading,\n    };\n  },\n};\n</script>\n\n<style lang=\"scss\">\n.add-article {\n  box-shadow: 0px 3px 0px #000400;\n  @apply mb-4 p-8 bg-white border-2 border-neutral-900 rounded-lg;\n}\n</style>\n","import { render } from \"./CreateArticle.vue?vue&type=template&id=73b156aa\"\nimport script from \"./CreateArticle.vue?vue&type=script&lang=js\"\nexport * from \"./CreateArticle.vue?vue&type=script&lang=js\"\n\nimport \"./CreateArticle.vue?vue&type=style&index=0&id=73b156aa&lang=scss\"\n\nimport exportComponent from \"C:\\\\Users\\\\rnp91\\\\Desktop\\\\week4-node\\\\client\\\\node_modules\\\\vue-loader\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"names":["_createElementVNode","class","for","xmlns","fill","viewBox","cx","cy","r","stroke","d","_hoisted_12","_hoisted_13","_hoisted_1","_hoisted_3","_hoisted_6","id","placeholder","cols","rows","$setup","message","$event","_hoisted_8","type","onChange","style","_createElementBlock","src","alt","onClick","_hoisted_14","setup","router","useRouter","article","reactive","userId","photo","file","image","ref","handleFileUpload","event","target","files","reader","FileReader","addEventListener","e","value","result","readAsDataURL","error","console","log","createArtucle","async","formData","FormData","append","data","axios","headers","Authorization","loading","createArticle","status","push","path","__exports__","render"],"sourceRoot":""}