"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[613],{4613:function(e,a,l){l.r(a),l.d(a,{default:function(){return U}});var t=l(3396),s=l(9242);const r=(0,t._)("div",{class:"relative"},[(0,t._)("div",{class:"mb-4 bg-white border-2 border-neutral-900 absolute w-full top-1 right-1"},[(0,t._)("div",{class:"flex justify-center items-center h-20"})])],-1),n={class:"relative"},c=(0,t._)("li",{class:"mb-4 bg-white border-2 border-neutral-900"},[(0,t._)("div",{class:"flex justify-center items-center h-20"},[(0,t._)("p",{class:"text-xl font-extrabold"},"張貼動態")])],-1),o={class:"add-article"},i={for:"articleContent"},d=(0,t._)("p",null,"文章內容",-1),p={for:"uploadFile"},u=(0,t._)("span",{class:"my-4 rounded bg-black text-white py-1 px-8"},"上傳照片",-1),g=["src"],m={class:"text-center"},h={class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},b=(0,t._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),f=(0,t._)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042\n              1.135 5.824 3 7.938l3-2.647z"},null,-1),w=[b,f],y=(0,t.Uk)(" 送出貼文 ");function v(e,a,l,b,f,v){return(0,t.wg)(),(0,t.iD)(t.HY,null,[r,(0,t._)("ul",n,[c,(0,t._)("li",o,[(0,t._)("label",i,[d,(0,t.wy)((0,t._)("textarea",{id:"articleContent",class:"border-2 border-neutral-900 w-full p-3",placeholder:"輸入您的貼文內容",cols:"30",rows:"10","onUpdate:modelValue":a[0]||(a[0]=e=>b.article.message=e)},null,512),[[s.nr,b.article.message]])]),(0,t._)("label",p,[u,(0,t._)("input",{id:"uploadFile",type:"file",onChange:a[1]||(a[1]=(...e)=>b.handleFileUpload&&b.handleFileUpload(...e)),style:{display:"none"}},null,32)]),b.image?((0,t.wg)(),(0,t.iD)("img",{key:0,class:"mt-3",src:b.image,alt:"文章圖片"},null,8,g)):(0,t.kq)("",!0),(0,t._)("div",m,[(0,t._)("button",{class:"flex mt-8 font-semibold rounded border-2 border-black bg-gray-400 py-4 px-32",onClick:a[2]||(a[2]=(...e)=>b.createArticle&&b.createArticle(...e))},[(0,t.wy)(((0,t.wg)(),(0,t.iD)("svg",h,w,512)),[[s.F8,b.loading]]),y])])])])],64)}var _=l(4870),x=l(678),k=l(6265),C=l.n(k),F={setup(){const e=(0,x.tv)(),a=(0,_.qj)({name:"Daniel",userId:"628d0b89c32e7b686cb9b1f3",message:"",photo:""});let l={};const t=(0,_.iH)(""),s=e=>{try{[l]=e.target.files;const a=new FileReader;a.addEventListener("load",(e=>{t.value=e.target.result})),a.readAsDataURL(l)}catch(a){console.log(a)}},r=async()=>{try{const e=new FormData;e.append("image",l),e.append("type","file");const{data:a}=await C().post("https://api.imgur.com/3/image",e,{headers:{Authorization:"Bearer 78a149bc21f3e2977b838f68c293d82cfb9a5985"}});console.log(a)}catch(e){console.log(e)}},n=(0,_.iH)(!1),c=async()=>{try{n.value=!0;const t=new FormData;t.append("userId",a.userId),t.append("name",a.name),t.append("message",a.message),t.append("image",l);const{data:s}=await C().post("https://shrouded-falls-94426.herokuapp.com/api/article",t);"success"===s.status&&e.push({path:"/"})}catch(t){console.log(t)}finally{n.value=!1}};return{article:a,handleFileUpload:s,file:l,image:t,createArtucle:r,createArticle:c,loading:n}}},A=l(89);const D=(0,A.Z)(F,[["render",v]]);var U=D}}]);
//# sourceMappingURL=613.5cbd1c59.js.map