"use strict";(self["webpackChunkclient"]=self["webpackChunkclient"]||[]).push([[150],{9150:function(e,t,a){a.r(t),a.d(t,{default:function(){return U}});var l=a(3396),s=a(9242);const r=(0,l._)("div",{class:"relative"},[(0,l._)("div",{class:"mb-4 bg-white border-2 border-neutral-900 absolute w-full top-1 right-1"},[(0,l._)("div",{class:"flex justify-center items-center h-20"})])],-1),c={class:"relative"},n=(0,l._)("li",{class:"mb-4 bg-white border-2 border-neutral-900"},[(0,l._)("div",{class:"flex justify-center items-center h-20"},[(0,l._)("p",{class:"text-xl font-extrabold"},"張貼動態")])],-1),o={class:"add-article"},i={for:"articleContent"},d=(0,l._)("p",null,"文章內容",-1),u={for:"uploadFile"},p=(0,l._)("span",{class:"my-4 rounded bg-black text-white py-1 px-8"},"上傳照片",-1),g=["src"],b={class:"text-center"},h={class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},m=(0,l._)("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),f=(0,l._)("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042\n              1.135 5.824 3 7.938l3-2.647z"},null,-1),w=[m,f],y=(0,l.Uk)(" 送出貼文 ");function v(e,t,a,m,f,v){return(0,l.wg)(),(0,l.iD)(l.HY,null,[r,(0,l._)("ul",c,[n,(0,l._)("li",o,[(0,l._)("label",i,[d,(0,l.wy)((0,l._)("textarea",{id:"articleContent",class:"border-2 border-neutral-900 w-full p-3",placeholder:"輸入您的貼文內容",cols:"30",rows:"10","onUpdate:modelValue":t[0]||(t[0]=e=>m.article.message=e)},null,512),[[s.nr,m.article.message]])]),(0,l._)("label",u,[p,(0,l._)("input",{id:"uploadFile",type:"file",onChange:t[1]||(t[1]=(...e)=>m.handleFileUpload&&m.handleFileUpload(...e)),style:{display:"none"}},null,32)]),m.image?((0,l.wg)(),(0,l.iD)("img",{key:0,class:"mt-3",src:m.image,alt:"文章圖片"},null,8,g)):(0,l.kq)("",!0),(0,l._)("div",b,[(0,l._)("button",{class:"flex mt-8 font-semibold rounded border-2 border-black bg-gray-400 py-4 px-32",onClick:t[2]||(t[2]=(...e)=>m.createArticle&&m.createArticle(...e))},[(0,l.wy)(((0,l.wg)(),(0,l.iD)("svg",h,w,512)),[[s.F8,m.loading]]),y])])])])],64)}var _=a(4870),x=a(678),k=a(6265),C=a.n(k),F={setup(){const e=(0,x.tv)(),t=(0,_.qj)({userId:"628d0b89c32e7b686cb9b1f3",message:"",photo:""});let a={};const l=(0,_.iH)(""),s=e=>{try{[a]=e.target.files;const t=new FileReader;t.addEventListener("load",(e=>{l.value=e.target.result})),t.readAsDataURL(a)}catch(t){console.log(t)}},r=async()=>{try{const e=new FormData;e.append("image",a),e.append("type","file");const{data:t}=await C().post("https://api.imgur.com/3/image",e,{headers:{Authorization:"Bearer 78a149bc21f3e2977b838f68c293d82cfb9a5985"}});console.log(t)}catch(e){console.log(e)}},c=(0,_.iH)(!1),n=async()=>{try{c.value=!0;const l=new FormData;l.append("userId",t.userId),l.append("message",t.message),l.append("image",a);const{data:s}=await C().post("https://desolate-garden-78877.herokuapp.com/api/article",l);"success"===s.status&&e.push({path:"/"})}catch(l){console.log(l)}finally{c.value=!1}};return{article:t,handleFileUpload:s,file:a,image:l,createArtucle:r,createArticle:n,loading:c}}},A=a(89);const D=(0,A.Z)(F,[["render",v]]);var U=D}}]);
//# sourceMappingURL=150.981f4083.js.map